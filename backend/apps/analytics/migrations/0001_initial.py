# Generated by Django 5.0.1 on 2025-11-05 14:47

import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('contenttypes', '0002_remove_content_type_name'),
        ('projects', '0002_project_data_collection_project_progress_tracking_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AnalysisCollaboration',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role', models.CharField(choices=[('owner', 'Owner'), ('editor', 'Editor'), ('analyst', 'Analyst'), ('viewer', 'Viewer'), ('reviewer', 'Reviewer')], max_length=20)),
                ('status', models.CharField(choices=[('active', 'Active'), ('pending', 'Pending'), ('declined', 'Declined'), ('removed', 'Removed')], default='pending', max_length=20)),
                ('permissions', models.JSONField(blank=True, default=dict)),
                ('invited_at', models.DateTimeField(auto_now_add=True)),
                ('accepted_at', models.DateTimeField(blank=True, null=True)),
                ('last_accessed', models.DateTimeField(blank=True, null=True)),
                ('contribution_count', models.IntegerField(default=0)),
                ('invited_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sent_analysis_invitations', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Analysis Collaboration',
                'verbose_name_plural': 'Analysis Collaborations',
                'db_table': 'analysis_collaborations',
            },
        ),
        migrations.CreateModel(
            name='AnalysisProject',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('theoretical_framework', models.JSONField(blank=True, default=dict)),
                ('research_questions', models.JSONField(blank=True, default=list)),
                ('hypotheses', models.JSONField(blank=True, default=list)),
                ('data_source', models.CharField(choices=[('survey_campaign', 'Survey Campaign'), ('external_file', 'External File'), ('database_query', 'Database Query')], max_length=50)),
                ('data_configuration', models.JSONField(blank=True, default=dict)),
                ('analysis_pipeline', models.JSONField(blank=True, default=list)),
                ('statistical_methods', models.JSONField(blank=True, default=list)),
                ('results_cache', models.JSONField(blank=True, default=dict)),
                ('generated_reports', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('active', 'Active'), ('completed', 'Completed'), ('archived', 'Archived')], default='draft', max_length=20)),
                ('version', models.IntegerField(default=1)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('collaborators', models.ManyToManyField(related_name='collaborative_analysis_projects', through='analytics.AnalysisCollaboration', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='created_analysis_projects', to=settings.AUTH_USER_MODEL)),
                ('parent_version', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='child_versions', to='analytics.analysisproject')),
                ('research_project', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='analysis_projects', to='projects.project')),
            ],
            options={
                'verbose_name': 'Analysis Project',
                'verbose_name_plural': 'Analysis Projects',
                'db_table': 'analysis_projects',
                'ordering': ['-updated_at'],
            },
        ),
        migrations.AddField(
            model_name='analysiscollaboration',
            name='project',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='analytics.analysisproject'),
        ),
        migrations.CreateModel(
            name='AnalysisReport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('format', models.CharField(choices=[('pdf', 'PDF'), ('docx', 'Word Document'), ('html', 'HTML'), ('latex', 'LaTeX'), ('markdown', 'Markdown')], max_length=20)),
                ('style', models.CharField(choices=[('apa', 'APA Style'), ('mla', 'MLA Style'), ('chicago', 'Chicago Style'), ('ieee', 'IEEE Style'), ('custom', 'Custom Style')], default='apa', max_length=20)),
                ('content', models.TextField(blank=True)),
                ('file', models.FileField(blank=True, upload_to='analysis_reports/')),
                ('include_methodology', models.BooleanField(default=True)),
                ('include_results', models.BooleanField(default=True)),
                ('include_discussion', models.BooleanField(default=True)),
                ('include_tables', models.BooleanField(default=True)),
                ('include_figures', models.BooleanField(default=True)),
                ('include_references', models.BooleanField(default=True)),
                ('include_appendices', models.BooleanField(default=False)),
                ('status', models.CharField(choices=[('generating', 'Generating'), ('completed', 'Completed'), ('failed', 'Failed')], default='generating', max_length=20)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('error_message', models.TextField(blank=True)),
                ('generated_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='generated_reports', to=settings.AUTH_USER_MODEL)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reports', to='analytics.analysisproject')),
            ],
            options={
                'verbose_name': 'Analysis Report',
                'verbose_name_plural': 'Analysis Reports',
                'db_table': 'analysis_reports',
                'ordering': ['-generated_at'],
            },
        ),
        migrations.CreateModel(
            name='AnalysisResult',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('analysis_type', models.CharField(choices=[('descriptive', 'Descriptive Statistics'), ('reliability', 'Reliability Analysis'), ('efa', 'Exploratory Factor Analysis'), ('cfa', 'Confirmatory Factor Analysis'), ('sem', 'Structural Equation Modeling'), ('regression', 'Regression Analysis'), ('anova', 'Analysis of Variance'), ('ttest', 'T-Test Analysis'), ('correlation', 'Correlation Analysis'), ('mediation', 'Mediation Analysis'), ('moderation', 'Moderation Analysis'), ('multigroup', 'Multi-Group Analysis'), ('longitudinal', 'Longitudinal Analysis')], max_length=50)),
                ('analysis_name', models.CharField(max_length=255)),
                ('analysis_description', models.TextField(blank=True)),
                ('statistical_output', models.JSONField(default=dict)),
                ('fit_indices', models.JSONField(blank=True, default=dict)),
                ('parameter_estimates', models.JSONField(blank=True, default=dict)),
                ('assumption_tests', models.JSONField(blank=True, default=dict)),
                ('diagnostic_plots', models.JSONField(blank=True, default=list)),
                ('statistical_interpretation', models.TextField(blank=True)),
                ('practical_significance', models.TextField(blank=True)),
                ('limitations', models.TextField(blank=True)),
                ('recommendations', models.TextField(blank=True)),
                ('r_code', models.TextField(blank=True)),
                ('r_session_info', models.JSONField(blank=True, default=dict)),
                ('analysis_parameters', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('running', 'Running'), ('completed', 'Completed'), ('failed', 'Failed'), ('cancelled', 'Cancelled')], default='running', max_length=20)),
                ('executed_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('execution_time', models.DurationField(blank=True, null=True)),
                ('error_message', models.TextField(blank=True)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='results', to='analytics.analysisproject')),
            ],
            options={
                'verbose_name': 'Analysis Result',
                'verbose_name_plural': 'Analysis Results',
                'db_table': 'analysis_results',
                'ordering': ['-executed_at'],
            },
        ),
        migrations.CreateModel(
            name='AnalysisTemplate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('template_type', models.CharField(choices=[('survey_analysis', 'Survey Analysis'), ('experimental_design', 'Experimental Design'), ('longitudinal_study', 'Longitudinal Study'), ('cross_sectional', 'Cross-Sectional Study'), ('meta_analysis', 'Meta-Analysis'), ('psychometric', 'Psychometric Analysis'), ('custom', 'Custom Template')], max_length=50)),
                ('analysis_pipeline', models.JSONField(default=list)),
                ('statistical_methods', models.JSONField(default=list)),
                ('required_variables', models.JSONField(default=dict)),
                ('optional_variables', models.JSONField(default=dict)),
                ('is_public', models.BooleanField(default=False)),
                ('usage_count', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='created_analysis_templates', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Analysis Template',
                'verbose_name_plural': 'Analysis Templates',
                'db_table': 'analysis_templates',
                'ordering': ['-usage_count', 'name'],
            },
        ),
        migrations.CreateModel(
            name='AnalysisVisualization',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('chart_type', models.CharField(choices=[('histogram', 'Histogram'), ('boxplot', 'Box Plot'), ('scatterplot', 'Scatter Plot'), ('correlation_heatmap', 'Correlation Heatmap'), ('scree_plot', 'Scree Plot'), ('factor_loading_plot', 'Factor Loading Plot'), ('path_diagram', 'Path Diagram'), ('coefficient_plot', 'Coefficient Plot'), ('diagnostic_plot', 'Diagnostic Plot'), ('residual_plot', 'Residual Plot'), ('qq_plot', 'Q-Q Plot'), ('custom', 'Custom Chart')], max_length=50)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('chart_data', models.JSONField(default=dict)),
                ('chart_config', models.JSONField(default=dict)),
                ('svg_content', models.TextField(blank=True)),
                ('png_file', models.FileField(blank=True, upload_to='analysis_charts/png/')),
                ('pdf_file', models.FileField(blank=True, upload_to='analysis_charts/pdf/')),
                ('is_publication_ready', models.BooleanField(default=False)),
                ('dpi', models.IntegerField(default=300)),
                ('width', models.IntegerField(default=800)),
                ('height', models.IntegerField(default=600)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('analysis_result', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='visualizations', to='analytics.analysisresult')),
            ],
            options={
                'verbose_name': 'Analysis Visualization',
                'verbose_name_plural': 'Analysis Visualizations',
                'db_table': 'analysis_visualizations',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='CitationReference',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('reference_type', models.CharField(choices=[('software', 'Software'), ('method', 'Statistical Method'), ('package', 'R Package'), ('book', 'Book'), ('article', 'Journal Article'), ('manual', 'Manual'), ('website', 'Website')], max_length=20)),
                ('title', models.CharField(max_length=500)),
                ('authors', models.JSONField(default=list)),
                ('year', models.IntegerField(blank=True, null=True)),
                ('journal', models.CharField(blank=True, max_length=255)),
                ('volume', models.CharField(blank=True, max_length=50)),
                ('issue', models.CharField(blank=True, max_length=50)),
                ('pages', models.CharField(blank=True, max_length=50)),
                ('publisher', models.CharField(blank=True, max_length=255)),
                ('doi', models.CharField(blank=True, max_length=255)),
                ('url', models.URLField(blank=True)),
                ('version', models.CharField(blank=True, max_length=50)),
                ('package_name', models.CharField(blank=True, max_length=100)),
                ('apa_citation', models.TextField(blank=True)),
                ('mla_citation', models.TextField(blank=True)),
                ('chicago_citation', models.TextField(blank=True)),
                ('bibtex_entry', models.TextField(blank=True)),
                ('usage_count', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Citation Reference',
                'verbose_name_plural': 'Citation References',
                'db_table': 'citation_references',
                'ordering': ['-usage_count', 'title'],
                'indexes': [models.Index(fields=['reference_type'], name='citation_re_referen_707cb6_idx'), models.Index(fields=['package_name'], name='citation_re_package_a88982_idx'), models.Index(fields=['-usage_count'], name='citation_re_usage_c_cf411d_idx')],
            },
        ),
        migrations.CreateModel(
            name='StatisticalValidation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('normality_tests', models.JSONField(blank=True, default=dict)),
                ('homoscedasticity_tests', models.JSONField(blank=True, default=dict)),
                ('independence_tests', models.JSONField(blank=True, default=dict)),
                ('linearity_tests', models.JSONField(blank=True, default=dict)),
                ('sample_size_adequacy', models.JSONField(blank=True, default=dict)),
                ('power_analysis', models.JSONField(blank=True, default=dict)),
                ('outlier_detection', models.JSONField(blank=True, default=dict)),
                ('influential_cases', models.JSONField(blank=True, default=dict)),
                ('multicollinearity_diagnostics', models.JSONField(blank=True, default=dict)),
                ('kmo_test', models.JSONField(blank=True, default=dict)),
                ('bartlett_test', models.JSONField(blank=True, default=dict)),
                ('model_identification', models.JSONField(blank=True, default=dict)),
                ('convergence_issues', models.JSONField(blank=True, default=dict)),
                ('overall_validity', models.CharField(choices=[('valid', 'Valid'), ('warning', 'Valid with Warnings'), ('invalid', 'Invalid')], max_length=20)),
                ('validation_notes', models.TextField(blank=True)),
                ('validation_recommendations', models.TextField(blank=True)),
                ('validated_at', models.DateTimeField(auto_now_add=True)),
                ('analysis_result', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='validation', to='analytics.analysisresult')),
            ],
            options={
                'verbose_name': 'Statistical Validation',
                'verbose_name_plural': 'Statistical Validations',
                'db_table': 'statistical_validations',
            },
        ),
        migrations.CreateModel(
            name='AnalysisComment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('object_id', models.CharField(max_length=255)),
                ('content', models.TextField()),
                ('is_resolved', models.BooleanField(default=False)),
                ('resolved_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('author', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='analysis_comments', to=settings.AUTH_USER_MODEL)),
                ('content_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='replies', to='analytics.analysiscomment')),
                ('resolved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='resolved_analysis_comments', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Analysis Comment',
                'verbose_name_plural': 'Analysis Comments',
                'db_table': 'analysis_comments',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['content_type', 'object_id'], name='analysis_co_content_76cc4b_idx'), models.Index(fields=['author', '-created_at'], name='analysis_co_author__6c8e8f_idx'), models.Index(fields=['is_resolved'], name='analysis_co_is_reso_fa7fd6_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='analysisproject',
            index=models.Index(fields=['created_by', '-updated_at'], name='analysis_pr_created_2734a8_idx'),
        ),
        migrations.AddIndex(
            model_name='analysisproject',
            index=models.Index(fields=['status', '-updated_at'], name='analysis_pr_status_97b1de_idx'),
        ),
        migrations.AddIndex(
            model_name='analysisproject',
            index=models.Index(fields=['research_project', '-updated_at'], name='analysis_pr_researc_526f3e_idx'),
        ),
        migrations.AddIndex(
            model_name='analysiscollaboration',
            index=models.Index(fields=['project', 'status'], name='analysis_co_project_088a76_idx'),
        ),
        migrations.AddIndex(
            model_name='analysiscollaboration',
            index=models.Index(fields=['user', 'status'], name='analysis_co_user_id_c7a5a7_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='analysiscollaboration',
            unique_together={('project', 'user')},
        ),
        migrations.AddIndex(
            model_name='analysisreport',
            index=models.Index(fields=['project', '-generated_at'], name='analysis_re_project_7fe1d6_idx'),
        ),
        migrations.AddIndex(
            model_name='analysisreport',
            index=models.Index(fields=['generated_by', '-generated_at'], name='analysis_re_generat_d3cb78_idx'),
        ),
        migrations.AddIndex(
            model_name='analysisreport',
            index=models.Index(fields=['status'], name='analysis_re_status_188fb0_idx'),
        ),
        migrations.AddIndex(
            model_name='analysisresult',
            index=models.Index(fields=['project', '-executed_at'], name='analysis_re_project_2b1463_idx'),
        ),
        migrations.AddIndex(
            model_name='analysisresult',
            index=models.Index(fields=['analysis_type', '-executed_at'], name='analysis_re_analysi_82fc14_idx'),
        ),
        migrations.AddIndex(
            model_name='analysisresult',
            index=models.Index(fields=['status', '-executed_at'], name='analysis_re_status_575523_idx'),
        ),
        migrations.AddIndex(
            model_name='analysistemplate',
            index=models.Index(fields=['template_type', 'is_public'], name='analysis_te_templat_c0e486_idx'),
        ),
        migrations.AddIndex(
            model_name='analysistemplate',
            index=models.Index(fields=['created_by', '-created_at'], name='analysis_te_created_7716f8_idx'),
        ),
        migrations.AddIndex(
            model_name='analysisvisualization',
            index=models.Index(fields=['analysis_result', '-created_at'], name='analysis_vi_analysi_adf740_idx'),
        ),
        migrations.AddIndex(
            model_name='analysisvisualization',
            index=models.Index(fields=['chart_type'], name='analysis_vi_chart_t_622f04_idx'),
        ),
    ]
