tunnel: bce1d1b0-1f68-4b83-a7d8-6aa36095346f
credentials-file: C:\Users\OWNER\.cloudflared\bce1d1b0-1f68-4b83-a7d8-6aa36095346f.json

ingress:
  # Frontend
  - hostname: ncskit.org
    service: http://127.0.0.1:3000
  - hostname: www.ncskit.org
    service: http://127.0.0.1:3000

  # Supabase Local (API Gateway / Kong)
  # Exposes Auth, Rest, Storage via one port (54321)
  # CRITICAL: originRequest setting needed for proper Host header forwarding in OAuth
  - hostname: api.ncskit.org
    service: http://127.0.0.1:54321
    originRequest:
      httpHostHeader: api.ncskit.org

  # Supabase Studio (Dashboard)
  - hostname: admin.ncskit.org
    service: http://127.0.0.1:54323

  # Django Backend
  - hostname: backend.ncskit.org
    service: http://127.0.0.1:8001

  # R Analytics Service
  - hostname: r.ncskit.org
    service: http://127.0.0.1:8000

  # Catch-all
  - service: http_status:404
